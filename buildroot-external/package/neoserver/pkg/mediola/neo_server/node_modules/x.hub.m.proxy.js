var util=require("util"),EventEmitter=require("events"),x=x||{};x.hub=x.hub||{};x.hub.m=x.hub.m||{};x.hub.m.proxy=x.hub.m.proxy||{};
x.hub.m.proxy.Handler=function(){var f=function(){this._logger=require("x.logger.js").getLogger("x.hub.m.proxy.Handler")};f.prototype.getState=function(a,e,b){if(!a)return b&&b({error:Error("no device")}),null;var c=null;a.gateway&&a.gateway.sys&&(c=a.gateway.sys);!c&&a.sys&&(c=a.sys);if(!c)return b&&b({error:Error("no sys parameter")}),null;var d=require("m.aio.modulemanager.js").getModule(c);if(!d)return b&&b({error:Error("no module for sys:"+c)}),null;a.gateway?d.doStatus("value",a.gateway,a,{value:e},
function(a,c){a?b&&b({error:a}):b&&b({data:{value:c.status}})}):d.doStatus("1",a,{value:e},function(a,c){a?b&&b({error:a}):b&&b({data:{value:c.status}})});return null};f.prototype.executeCommand=function(a,e,b){if(!a)return b&&b({error:Error("no device")}),null;var c=null;a.gateway&&a.gateway.sys&&(c=a.gateway.sys);!c&&a.sys&&(c=a.sys);if(!c)return b&&b({error:Error("no sys parameter")}),null;var d=require("m.aio.modulemanager.js").getModule(c);if(!d)return b&&b({error:Error("no module for sys:"+
c)}),null;a.gateway?d.doCommand(a.gateway,a,e,function(a){b&&b({error:a})}):d.doCommand(a,e,function(a,c){b&&b({error:a})})};return f}();"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports=module.exports=new x.hub.m.proxy.Handler);

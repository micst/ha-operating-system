var x=x||{};x.videoplayer=x.videoplayer||{};
x.videoplayer.Player=function(){var d=function(a){this._options=a;this._listeners={}};d.prototype.on=function(a,b){a&&b&&(this._listeners[a]||(this._listeners[a]=[]),-1==this._listeners[a].indexOf(b)&&this._listeners[a].push(b))};d.prototype.off=function(a,b){a&&b&&this._listeners[a]&&(b=this._listeners[a].indexOf(b),-1!=b&&this._listeners[a].splice(b,1))};d.prototype.init=function(a){throw Error("func init not implemented");};d.prototype.playHLS=function(a){};d.prototype.playFLV=function(a){};d.prototype._emitEvent=
function(a,b){if(a){var e=this._listeners[a];if(e&&0<e.length)for(var c=0;c<e.length;c++){var d=e[c];try{d(b)}catch(f){this._logger.log("trace","call "+a+" listener failed, error:"+f.message)}}}};var c=function(a){d.call(this,a);this._logger=require("x.logger.js").getLogger("x.videoplayer.MobilePlayer");this._playerID=null;var b=this;this._nativeListener=function(a){a?a.error?b._emitEvent("error",Error(a.error)):a.close?b._emitEvent("close"):a.start?b._emitEvent("start"):a.end?b._emitEvent("end"):
a.replay?b._emitEvent("replay"):a.init&&(a.init.error?b._emitEvent("init",Error(a.init.error)):(b._playerID=a.init.playerID,b._emitEvent("init"))):b._emitEvent("error",Error("native bridge error"))}};c.prototype=new d;c.prototype.constructor=c;c.prototype.init=function(a){if(a)this.on("init",a);XC.callHost("videoplayer","createPlayer",this._options?this._options:{},this._nativeListener)};c.prototype.playHLS=function(a,b){XC.callHost("videoplayer","playHLS",{playerID:this._playerID,url:a,duration:b})};
c.prototype.playMP4=function(a,b,c){XC.callHost("videoplayer","playMP4",{playerID:this._playerID,url:a,duration:b,options:c})};c.prototype.playRTSP=function(a,b){XC.callHost("videoplayer","playRTSP",{playerID:this._playerID,url:a,transport:b})};c.prototype.playMultiHLS=function(a){XC.callHost("videoplayer","playMultiHLS",{playerID:this._playerID,urls:a})};c.prototype.playFLV=function(a,b){XC.callHost("videoplayer","playFLV",{playerID:this._playerID,url:a,duration:b})};c.prototype.close=function(){XC.callHost("videoplayer",
"closePlayer",{playerID:this._playerID})};d.iOSPlayer=c;d.AndroidPlayer=c;return d}();
x.videoplayer.Handler=function(){var d=function(){};d.prototype.createVideoPlayer=function(c,a){var b=null,d=null;"undefined"!=typeof window&&null!=window&&window.XCHost||(b="node-webkit");"undefined"!=typeof window&&null!=window&&window.XCHost&&window.XCHost.getType&&(b=window.XCHost.getType());d="Android"==b?new x.videoplayer.Player.AndroidPlayer(c):"node-webkit"==b||"undefined"!=typeof process&&null!=process&&"node"==process.title?new x.videoplayer.Player.NWPlayer(c):new x.videoplayer.Player.iOSPlayer(c);
d.init(function(b){a&&a(b,d)})};return d}();"undefined"!=typeof module&&null!=module&&(module.exports=new x.videoplayer.Handler);

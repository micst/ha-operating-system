var xnm=xnm||{};xnm.aio=xnm.aio||{};xnm.aio.neoserver=xnm.aio.neoserver||{};xnm.aio.neoserver.systems=xnm.aio.neoserver.systems||{};
xnm.aio.neoserver.systems._SysVar={setVar:function(a,b,c,d,e){a._executeRequest("setVar",{id:c,type:b,value:d},{timeout:2E4},function(a){e&&e(a)})},delVar:function(a,b,c){a._executeRequest("delVar",{id:b},{timeout:2E4},function(a){c&&c(a)})},getSysVars:function(a,b){a._executeRequest("getStates",null,{timeout:2E4},function(a,d){if(a)b&&b(a);else{a=[];if(d)for(var c=0;c<d.length;c++){var f=d[c];if(f.adr||f.id)switch(f.type){case xnm.aio.neoserver.systems.Boolean.DM.TYPE:case xnm.aio.neoserver.systems.Int.DM.TYPE:case xnm.aio.neoserver.systems.Float.DM.TYPE:case xnm.aio.neoserver.systems.String.DM.TYPE:a.push({type:f.type,
address:f.adr});break;case xnm.aio.neoserver.systems.Task.DM.TYPE:a.push({type:f.type,address:f.id})}}b&&b(null,a)}})}};
xnm.aio.neoserver.systems.Boolean={regist:function(a,b,c){b&&b.address?xnm.aio.neoserver.systems._SysVar.setVar(a,this.DM.TYPE,b.address,"on",c):c&&c(Error("regist device option foramt invalid"))},delVar:function(a,b,c){b?xnm.aio.neoserver.systems._SysVar.delVar(a,b,c):c&&c(Error("address invalid"))},executeCommandCreator:function(a,b,c,d){b?c&&c.value?b&&b.address?this._executeCommand(a,b,c,d):d&&d(Error("device address is empty")):d&&d(Error("device command is empty")):d&&d(Error("device is null"))},
_executeCommand:function(a,b,c,d){xnm.aio.neoserver.systems._SysVar.setVar(a,this.DM.TYPE,b.address,c.value,d)},handleStateCreator:function(a,b,c){return b&&b.value?(a=this._handleState(a,c))?a[b.value]:null:null},_handleState:function(a,b){if(!(b.type&&"onoff"==b.type.toLowerCase()&&b.adr&&b.state&&a.address&&a.address&&a.address.toLowerCase()==b.adr.toLowerCase()))return null;(a=b.state)&&(a=a.toLowerCase());return{state:a}},generateActionCode:function(a,b){if(!b||!b.address||2!=b.address.length||
!a)return null;switch(a.value){case "on":a="01";break;case "off":a="00";break;case "toggle":a="0F";break;default:return null}return b.address+a},parseActionCode:function(a,b){if(!a||4!=a.length||!b||!b.address||2!=b.address.length)return null;var c=a.substr(0,2);a=a.substr(2,2);if(c.toLowerCase()!=b.address.toLowerCase())return null;b={};switch(a.toUpperCase()){case "01":b.value="on";break;case "00":b.value="off";break;case "0F":b.value="toggle";break;default:return null}return b},DM:{TYPE:"ONOFF",
MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}],ipevt:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},getGatewayDeviceType:function(a){return{type:this.TYPE,name:"Boolean System Variable"}},getCommandStatusMap:function(){return this.MAP},getIPevtMap:function(a,b){a=this.getCommandStatusMap(a);if(!a)return null;
b={ipevt:[]};a.ipevt&&(b.ipevt=a.ipevt);return b},createDevice:function(a,b,c){b=xnm.aio.neoserver.DM.DMError;var d=xnm.aio.neoserver.DM.DMError.ERROR_CODE;a.address?(a=JSON.parse(JSON.stringify(a)),c(null,a)):c(new b(d.INVALID,"parameter address is invalid"))},updateDevice:function(a,b,c){b=xnm.aio.neoserver.DM.DMError;var d=xnm.aio.neoserver.DM.DMError.ERROR_CODE;a.address?(a=JSON.parse(JSON.stringify(a)),c(null,a)):c(new b(d.INVALID,"parameter address is invalid"))},deleteDevice:function(a,b,c,
d){xnm.aio.neoserver.systems.Boolean.delVar(a,b.address,function(){d&&d(null,JSON.parse(JSON.stringify(b)))})}}};
xnm.aio.neoserver.systems.Int={regist:function(a,b,c){b&&b.address?xnm.aio.neoserver.systems._SysVar.setVar(a,this.DM.TYPE,b.address,"00000000",c):c&&c(Error("regist device option foramt invalid"))},delVar:function(a,b,c){b?xnm.aio.neoserver.systems._SysVar.delVar(a,b,c):c&&c(Error("address invalid"))},executeCommandCreator:function(a,b,c,d){b?c&&c.value?b&&b.address?this._executeCommand(a,b,c,d):d&&d(Error("device address is empty")):d&&d(Error("device command is empty")):d&&d(Error("device is null"))},
_executeCommand:function(a,b,c,d){if("setValue"!=c.value)d&&d(Error("unknow command"));else{var e=0;null!=c.ext&&"undefined"!=typeof c.ext&&(e=parseInt(c.ext));2147483647<e&&(e=2147483647);-2147483648>e&&(e=-2147483648);e=xnm.aio.neoserver.Util.getHexVal(e,8);xnm.aio.neoserver.systems._SysVar.setVar(a,this.DM.TYPE,b.address,e,d)}},handleStateCreator:function(a,b,c){return b&&b.value?(a=this._handleState(a,c))?a[b.value]:null:null},_handleState:function(a,b){if(!(b.type&&"int"==b.type.toLowerCase()&&
b.adr&&b.state&&a.address&&a.address&&a.address.toLowerCase()==b.adr.toLowerCase()))return null;a=parseInt(b.state,16);return{state:a&2147483648?a-4294967296:a}},DM:{TYPE:"INT",MAP:{command:[{type:"int",name:"set value",ref:{value:"setValue",ext:"%d",extMeta:"-2147483648-2147483647"}}],status:[{type:"int",name:"status",ref:{value:"state",extMeta:"-2147483648-2147483647"}}],ipevt:[{type:"int",name:"status",ref:{value:"state",extMeta:"-2147483648-2147483647"}}]},getGatewayDeviceType:function(){return{type:this.TYPE,
name:"Integer System Variable"}},getCommandStatusMap:function(){return this.MAP},getIPevtMap:function(a,b){a=this.getCommandStatusMap(a);if(!a)return null;b={ipevt:[]};a.ipevt&&(b.ipevt=a.ipevt);return b},getActionMap:function(){return{command:[]}},createDevice:function(a,b,c){b=xnm.aio.neoserver.DM.DMError;var d=xnm.aio.neoserver.DM.DMError.ERROR_CODE;a.address?(a=JSON.parse(JSON.stringify(a)),c(null,a)):c(new b(d.INVALID,"parameter address is invalid"))},updateDevice:function(a,b,c){b=xnm.aio.neoserver.DM.DMError;
var d=xnm.aio.neoserver.DM.DMError.ERROR_CODE;a.address?(a=JSON.parse(JSON.stringify(a)),c(null,a)):c(new b(d.INVALID,"parameter address is invalid"))},deleteDevice:function(a,b,c,d){xnm.aio.neoserver.systems.Int.delVar(a,b.address,function(){d&&d(null,JSON.parse(JSON.stringify(b)))})}}};
xnm.aio.neoserver.systems.Float={regist:function(a,b,c){b&&b.address?xnm.aio.neoserver.systems._SysVar.setVar(a,this.DM.TYPE,b.address,"00000000",c):c&&c(Error("regist device option foramt invalid"))},delVar:function(a,b,c){b?xnm.aio.neoserver.systems._SysVar.delVar(a,b,c):c&&c(Error("address invalid"))},executeCommandCreator:function(a,b,c,d){b?c&&c.value?b&&b.address?this._executeCommand(a,b,c,d):d&&d(Error("device address is empty")):d&&d(Error("device command is empty")):d&&d(Error("device is null"))},
_executeCommand:function(a,b,c,d){if("setValue"!=c.value)d&&d(Error("unknow command"));else{var e=0;null!=c.ext&&"undefined"!=typeof c.ext&&(e=parseFloat(c.ext));e=Math.round(100*e);2147483647<e&&(e=2147483647);-2147483648>e&&(e=-2147483648);e=xnm.aio.neoserver.Util.getHexVal(e,8);xnm.aio.neoserver.systems._SysVar.setVar(a,this.DM.TYPE,b.address,encodeURI(e),d)}},handleStateCreator:function(a,b,c){return b&&b.value?(a=this._handleState(a,c))?a[b.value]:null:null},_handleState:function(a,b){if(!(b.type&&
"float"==b.type.toLowerCase()&&b.adr&&b.state&&a.address&&a.address&&a.address.toLowerCase()==b.adr.toLowerCase()))return null;a=parseInt(b.state,16);a=((a&2147483648?a-4294967296:a)/100).toFixed(2);return{state:a}},DM:{TYPE:"FLOAT",MAP:{command:[{type:"float",name:"set value",ref:{value:"setValue",ext:"%f",extMeta:"-21474836.48-21474836.47",scale:"0.01"}}],status:[{type:"float",name:"status",ref:{value:"state",extMeta:"-21474836.48-21474836.47",scale:"0.01"}}],ipevt:[{type:"float",name:"status",
ref:{value:"state",extMeta:"-21474836.48-21474836.47",scale:"0.01"}}]},getGatewayDeviceType:function(){return{type:this.TYPE,name:"Float System Variable"}},getCommandStatusMap:function(){return this.MAP},getIPevtMap:function(a,b){a=this.getCommandStatusMap(a);if(!a)return null;b={ipevt:[]};a.ipevt&&(b.ipevt=a.ipevt);return b},getActionMap:function(){return{command:[]}},createDevice:function(a,b,c){b=xnm.aio.neoserver.DM.DMError;var d=xnm.aio.neoserver.DM.DMError.ERROR_CODE;a.address?(a=JSON.parse(JSON.stringify(a)),
c(null,a)):c(new b(d.INVALID,"parameter address is invalid"))},updateDevice:function(a,b,c){b=xnm.aio.neoserver.DM.DMError;var d=xnm.aio.neoserver.DM.DMError.ERROR_CODE;a.address?(a=JSON.parse(JSON.stringify(a)),c(null,a)):c(new b(d.INVALID,"parameter address is invalid"))},deleteDevice:function(a,b,c,d){xnm.aio.neoserver.systems.Float.delVar(a,b.address,function(){d&&d(null,JSON.parse(JSON.stringify(b)))})}}};
xnm.aio.neoserver.systems.String={regist:function(a,b,c){b&&b.address?xnm.aio.neoserver.systems._SysVar.setVar(a,this.DM.TYPE,b.address,"",c):c&&c(Error("regist device option foramt invalid"))},delVar:function(a,b,c){b?xnm.aio.neoserver.systems._SysVar.delVar(a,b,c):c&&c(Error("address invalid"))},executeCommandCreator:function(a,b,c,d){b?c&&c.value?b&&b.address?this._executeCommand(a,b,c,d):d&&d(Error("device address is empty")):d&&d(Error("device command is empty")):d&&d(Error("device is null"))},
_executeCommand:function(a,b,c,d){if("setValue"!=c.value)d&&d(Error("unknow command"));else{var e="";null!=c.ext&&"undefined"!=typeof c.ext&&(e=c.ext);!a._isV5P()&&15<e.length&&(e=e.substr(0,15));xnm.aio.neoserver.systems._SysVar.setVar(a,this.DM.TYPE,b.address,encodeURI(e),d)}},handleStateCreator:function(a,b,c){return b&&b.value?(a=this._handleState(a,c))?a[b.value]:null:null},_handleState:function(a,b){return b.type&&"string"==b.type.toLowerCase()&&b.adr&&"string"===typeof b.state&&a.address&&
a.address&&a.address.toLowerCase()==b.adr.toLowerCase()?{state:b.state}:null},DM:{TYPE:"STRING",MAP:{command:[{type:"string",name:"set value",ref:{value:"setValue",ext:"%s"}}],status:[{type:"string",name:"status",ref:{value:"state"}}],ipevt:[{type:"string",name:"status",ref:{value:"state"}}]},getGatewayDeviceType:function(){return{type:this.TYPE,name:"String System Variable"}},getCommandStatusMap:function(){return this.MAP},getIPevtMap:function(a,b){a=this.getCommandStatusMap(a);if(!a)return null;
b={ipevt:[]};a.ipevt&&(b.ipevt=a.ipevt);return b},getActionMap:function(){return{command:[]}},createDevice:function(a,b,c){b=xnm.aio.neoserver.DM.DMError;var d=xnm.aio.neoserver.DM.DMError.ERROR_CODE;a.address?(a=JSON.parse(JSON.stringify(a)),c(null,a)):c(new b(d.INVALID,"parameter address is invalid"))},updateDevice:function(a,b,c){b=xnm.aio.neoserver.DM.DMError;var d=xnm.aio.neoserver.DM.DMError.ERROR_CODE;a.address?(a=JSON.parse(JSON.stringify(a)),c(null,a)):c(new b(d.INVALID,"parameter address is invalid"))},
deleteDevice:function(a,b,c,d){xnm.aio.neoserver.systems.String.delVar(a,b.address,function(){d&&d(null,JSON.parse(JSON.stringify(b)))})}}};
xnm.aio.neoserver.systems.Task={executeCommandCreator:function(a,b,c,d){b?c&&c.value?b&&b.address?this._executeCommand(a,b,c,d):d&&d(Error("device address is empty")):d&&d(Error("device command is empty")):d&&d(Error("device is null"))},_executeCommand:function(a,b,c,d){if("on"==c.value){var e="SetTaskActive";var f={id:b.address,active:!0}}else"off"==c.value?(e="SetTaskActive",f={id:b.address,active:!1}):"toggle"==c.value&&(e="ToggleTaskActive",f={id:b.address});a._executeRequest(e,f,{timeout:2E3},
function(a){d&&d(a)})},handleStateCreator:function(a,b,c){return b&&b.value?(a=this._handleState(a,c))?a[b.value]:null:null},_handleState:function(a,b){return b.type&&"task"==b.type.toLowerCase()&&b.id&&a.address&&a.address==b.id?{state:b.active?"on":"off"}:null},DM:{TYPE:"TASK",MAP:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}]},
getGatewayDeviceType:function(){return{type:this.TYPE,name:"Task System Variable"}},getCommandStatusMap:function(){return this.MAP},createDevice:function(a,b,c){b=xnm.aio.neoserver.DM.DMError;var d=xnm.aio.neoserver.DM.DMError.ERROR_CODE;a.address?(a=JSON.parse(JSON.stringify(a)),c(null,a)):c(new b(d.INVALID,"parameter address is invalid"))},updateDevice:function(a,b,c){b=xnm.aio.neoserver.DM.DMError;var d=xnm.aio.neoserver.DM.DMError.ERROR_CODE;a.address?(a=JSON.parse(JSON.stringify(a)),c(null,a)):
c(new b(d.INVALID,"parameter address is invalid"))},deleteDevice:function(a,b,c,d){d(null,b)}}};
xnm.aio.neoserver.DM={SYS:"neoserver",GATEWAY_MAP:{cloud_forward:{command:[{type:"enum",name:"cloud forward on",ref:{value:"cfOn"}},{type:"enum",name:"cloud forward off",ref:{value:"cfOff"}}],status:[{type:"enum",name:"cloud forward settings",ref:{value:"cfSetting",options:["off","on"]}}]}},DMError:function(){var a=function(a,c){this.code=a;this.message=c;this.stack=Error().stack};a.prototype=Error();a.prototype.name="NEOServerDeviceManagerError";a.prototype.code=0;a.ERROR_CODE={DEFAULT:0,INDEX_EXISTS:1,
ID_EXISTS:2,INVALID:3,UNKNOW:4,NOT_FOUND:5,IP_EXISTS:6};return a}(),getSystem:function(a){if(!a||!a.type)return null;for(var b in xnm.aio.neoserver.systems)if(xnm.aio.neoserver.systems.hasOwnProperty(b)){var c=xnm.aio.neoserver.systems[b];if(c&&c.DM&&c.DM.TYPE&&c.DM.TYPE.toLowerCase()==a.type.toLowerCase())return c}return null},getGatewayType:function(){return{sys:this.SYS,name:"NEO SERVER"}},getGatewayDeviceType:function(a){var b=[],c;for(c in xnm.aio.neoserver.systems)if(xnm.aio.neoserver.systems.hasOwnProperty(c)){var d=
xnm.aio.neoserver.systems[c];if(d&&d.DM&&d.DM.getGatewayDeviceType&&(d=d.DM.getGatewayDeviceType(a)))if(Array.isArray(d)){for(var e=0;e<d.length;e++)d[e].sys=this.SYS;b=b.concat(d)}else d.sys=this.SYS,b.push(d)}return b},applyUIFilter:function(a,b){return this._applyFilter(a,b)},applyIPEventFilter:function(a,b,c,d,e){return this._applyFilter(a,b,e)},applyUIFilterGateway:function(a,b){var c=function(a,b){if("*"==a)return!0;for(var c=!1,d=0;d<a.length;d++)if(a[d]==b){c=!0;break}return c},d=function(a,
b){var d=[],e=b.elems;a=a?xnm.aio.neoserver.DM.GATEWAY_MAP.cloud_forward:null;if(a)switch(b.catagory){case "command":a.command&&a.command.forEach(function(a){c(e,a.type)&&(a=JSON.parse(JSON.stringify(a)),d.push(a))});break;case "status":a.status&&a.status.forEach(function(a){c(e,a.type)&&(a=JSON.parse(JSON.stringify(a)),d.push(a))})}return d},e=JSON.parse(JSON.stringify(a)),f=null;switch(b.catagory){case "command":f=d(a,b);e.command=f;break;case "status":f=d(a,b);e.status=f;break;default:return null}return f&&
0!=f.length?e:null},_applyFilter:function(a,b,c){var d=function(a,b){if("*"==a)return!0;for(var c=!1,d=0;d<a.length;d++)if(a[d]==b){c=!0;break}return c},e=function(a,b,c){var e=[];if("ipevt"==c.type)a.ipevt&&a.ipevt.forEach(function(a){a=JSON.parse(JSON.stringify(a));e.push(a)});else switch(c.catagory){case "command":a.command&&a.command.forEach(function(a){d(c.elems,a.type)&&(a=JSON.parse(JSON.stringify(a)),e.push(a))});break;case "status":a.status&&a.status.forEach(function(a){d(c.elems,a.type)&&
(a=JSON.parse(JSON.stringify(a)),e.push(a))})}return e};if(!a.sys)return null;var f=JSON.parse(JSON.stringify(a));a=function(a,b,c){var d=[],f,g=xnm.aio.neoserver.DM.getSystem(a);"ipevt"==b.type?g&&g.DM&&g.DM.getIPevtMap&&(f=g.DM.getIPevtMap(a,c)):"action"==b.catagory&&g&&g.DM&&g.DM.getActionMap&&(f=g.DM.getActionMap(a));f||g&&g.DM&&g.DM.getCommandStatusMap&&(f=g.DM.getCommandStatusMap(a));f&&(a=e(f,a,b),d=d.concat(a));return d}(a,b,c);if("ipevt"==b.type)f.ipevt=a;else switch(b.catagory){case "command":f.command=
a;break;case "status":f.status=a}return a&&0!=a.length?f:null},createGateway:function(a,b,c){c(null,a)},updateGateway:function(a,b,c,d){d(null,b)},deleteGateway:function(a,b,c){c()},createDevice:function(a,b,c){var d=this.DMError,e=this.DMError.ERROR_CODE;if(a)if(a.gateway)if(a.type)if(b.data&&b.data.gateways&&0!==b.data.gateways.length){var f=b.data.gateways,g;for(g=0;g<f.length;g++)if(f[g].index===a.gateway){var h=f[g];break}h?(d=this.getSystem(a,h.info))&&d.DM&&d.DM.createDevice?d.DM.createDevice(a,
b,c):(a=JSON.parse(JSON.stringify(a)),c(null,a)):c(new d(e.NOT_FOUND,"gateway with index "+a.gateway+" not exists"))}else c(new d(e.NOT_FOUND,"gateway with index "+a.gateway+" not exists"));else c(new d(e.INVALID,"type is invalid"));else c(new d(e.INVALID,"gateway is invalid"));else c(new d(e.INVALID,"info is invalid"))},updateDevice:function(a,b,c){var d=this.DMError,e=this.DMError.ERROR_CODE;if(a)if(a.gateway)if(a.type)if(b.data&&b.data.gateways&&0!==b.data.gateways.length){var f=b.data.gateways,
g;for(g=0;g<f.length;g++)if(f[g].index===a.gateway){var h=f[g];break}h?(d=this.getSystem(a))&&d.DM&&d.DM.updateDevice?d.DM.updateDevice(a,b,c):(a=JSON.parse(JSON.stringify(a)),c(null,a)):c(new d(e.NOT_FOUND,"gateway with index "+a.gateway+" not exists"))}else c(new d(e.NOT_FOUND,"gateway with index "+a.gateway+" not exists"));else c(new d(e.INVALID,"type is invalid"));else c(new d(e.INVALID,"gateway is invalid"));else c(new d(e.INVALID,"info is invalid"))},deleteDevice:function(a,b,c){var d=this.getSystem(a);
if(d&&d.DM&&d.DM.deleteDevice){var e=JSON.parse(JSON.stringify(a));b&&b.dm&&b.tenant&&b.tenant.index&&a&&a.gateway?b.dm.execute("read",b.tenant.index,"gateway",{filter:"prop",index:a.gateway,"info.sys":"neoserver"},function(f,g){!f&&g&&0!=g.length&&g[0]&&g[0].info?(f=require("xnm.aio.neoserver.js").resolveGateway(g[0].info),d.DM.deleteDevice(f,a,b,c)):c&&c(null,e)}):c&&c(null,e)}else c()}};
xnm.aio.neoserver.Handler=function(){var a=require("x.logger.js");xnm.aio.neoserver.DM._logger=a?a.getLogger("xnm.aio.neoserver.DM"):{log:function(){}}};xnm.aio.neoserver.Handler.prototype.devicemanager=xnm.aio.neoserver.DM;xnm.aio.neoserver.Handler.prototype.registModule=function(a){a.register(xnm.aio.neoserver.DM.SYS,"neoserver")};
xnm.aio.neoserver.Handler.prototype.resolveGateway=function(a){var b=require("xnm.aio.gateway.js");if(!a.ip)return null;b=new b.GatewayV5Plus(a.ip,a.port);a.username&&(b.user=a.username);a.password&&(b.password=a.password);b._sid=a.sid;return b};xnm.aio.neoserver.Handler.prototype.getDeviceCommands=function(a,b){a=(a=a&&a.ip?xnm.aio.gateway.DM.applyUIFilterGateway(a,{catagory:"command",elems:"*"}):xnm.aio.gateway.DM.applyUIFilter(a,{catagory:"command",elems:"*"}))?a.command:[];b&&b(null,a)};
xnm.aio.neoserver.Handler.prototype.getDeviceStatus=function(a,b){a=(a=a&&a.ip?xnm.aio.gateway.DM.applyUIFilterGateway(a,{catagory:"status",elems:"*"}):xnm.aio.gateway.DM.applyUIFilter(a,{catagory:"status",elems:"*"}))?a.status:[];b&&b(null,a)};xnm.aio.neoserver.Handler.prototype.regist=function(a,b,c){if(a=this.resolveGateway(a)){var d=xnm.aio.neoserver.DM.getSystem(b);d?d.regist(a,b,c):c&&c(Error("device type unknown"))}else c&&c(Error("gateway json format invalid"))};
xnm.aio.neoserver.Handler.prototype.doCommand=function(a,b,c,d){(a=this.resolveGateway(a))?a.executeCommandCreator(b,c,d):d&&d(Error("gateway json format invalid"))};xnm.aio.neoserver.Handler.prototype.doStatus=function(a,b,c,d,e){(b=this.resolveGateway(b))?b.getStatesCreator(null,[{id:a,device:c,status:d}],function(a,b){a?e&&e(a):e&&e(null,b[0])}):e&&e(Error("gateway json format invalid"))};
xnm.aio.neoserver.Handler.prototype.getSysVars=function(a,b){a?(a=this.resolveGateway(a))?xnm.aio.neoserver.systems._SysVar.getSysVars(a,b):b&&b(Error("gateway format invalid")):b&&b(Error("gateway json is null"))};"undefined"!=typeof module&&null!=module&&(module.exports=new xnm.aio.neoserver.Handler);
